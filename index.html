<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heat Score Card</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }
        th, td {
            border: 1px solid black;
            padding: 0;
        }
        .color-cell {
            height: 30px;
        }
        input {
            width: 100%;
            height: 100%;
            text-align: center;
            border: none;
            box-sizing: border-box;
        }
        button {
            margin: 10px;
            padding: 5px 10px;
            font-size: 16px;
        }
    </style>
</head>
<body onload="loadScores()">
    <h2>Heat Score Card</h2>
    <table>
        <tr>
            <td class="color-cell; column1" style="background: yellow;color: black;">Yellow</td>
            <td class="color-cell; column2" style="background: blue; color: white;">Blue</td>
            <td class="color-cell; column3" style="background: green; color: white;">Green</td>
            <td class="color-cell; column4" style="background: red; color: white;">Red</td>
            <td class="color-cell; column5" style="background: black; color: white;">Black</td>
            <td class="color-cell; column6" style="background: lightgray; color: black;">Gray</td>
            <td class="color-cell; column7" style="background: orange; color: black;">Orange</td>
            <td class="color-cell; column8" style="background: purple; color: white;">Purple</td>
        </tr>
        <tr>
            <td class="column1"><input type="text" id="name1" oninput="saveScores()"></td>
            <td class="column2"><input type="text" id="name2" oninput="saveScores()"></td>
            <td class="column3"><input type="text" id="name3" oninput="saveScores()"></td>
            <td class="column4"><input type="text" id="name4" oninput="saveScores()"></td>
            <td class="column5"><input type="text" id="name5" oninput="saveScores()"></td>
            <td class="column6"><input type="text" id="name6" oninput="saveScores()"></td>
            <td class="column7"><input type="text" id="name7" oninput="saveScores()"></td>
            <td class="column8"><input type="text" id="name7" oninput="saveScores()"></td>
        </tr>
        
        <!-- Score input rows -->
        <script>
            function updateTotal(player) {
                let total = 0;
                for (let round = 1; round <= 4; round++) {
                    let score = document.getElementById(`score${round}_${player}`).value;
                    total += parseInt(score) || 0;
                }
                document.getElementById(`total_${player}`).innerText = total;
            }
            
            document.addEventListener("DOMContentLoaded", function() {
                let table = document.querySelector("table");
                for (let round = 1; round <= 4; round++) {
                    let row = document.createElement("tr");
                    for (let player = 1; player <= 8; player++) {
                        let cell = document.createElement("td");
                        cell.classList.add(`column${player}`);
                        let input = document.createElement("input");
                        input.type = "number";
                        input.id = `score${round}_${player}`;
                        input.min = "0";
                        input.max = "9";
                        input.oninput = function() { updateTotal(player); };
                        cell.appendChild(input);
                        row.appendChild(cell);
                    }
                    table.appendChild(row);
                }
                
                // Add total row
                let totalRow = document.createElement("tr");
                for (let player = 1; player <= 8; player++) {
                    let cell = document.createElement("td");
                    cell.classList.add(`column${player}`);
                    cell.id = `total_${player}`;
                    cell.innerText = "0";
                    totalRow.appendChild(cell);
                }
                table.appendChild(totalRow);
            });

            function saveScores() {
                let data = {};
                for (let player = 1; player <= 8; player++) {
                    data[`name${player}`] = document.getElementById(`name${player}`).value;
                    for (let round = 1; round <= 4; round++) {
                        let input = document.getElementById(`score${round}_${player}`);
                        if (input) {
                            data[`score${round}_${player}`] = input.value;
                        }
                    }
                }
                document.cookie = `scores=${JSON.stringify(data)}; path=/; max-age=31536000`;
            }

            function loadScores() {
                let cookies = document.cookie.split('; ');
                let scores = cookies.find(row => row.startsWith('scores='));
                if (scores) {
                    let data = JSON.parse(scores.split('=')[1]);
                    for (let player = 1; player <= 8; player++) {
                        if (data[`name${player}`]) {
                            document.getElementById(`name${player}`).value = data[`name${player}`];
                        }
                        for (let round = 1; round <= 4; round++) {
                            let input = document.getElementById(`score${round}_${player}`);
                            if (input && data[`score${round}_${player}`]) {
                                input.value = data[`score${round}_${player}`];
                            }
                        }
                        updateTotal(player);
                    }
                }
            }
            function hideColumn(c) {
                let columns = document.querySelectorAll(`.column${c}`);
                columns.forEach(col => {
                    col.style.display = (col.style.display === "none") ? "table-cell" : "none";
                });
            }

            function clearScores() {
                // TODO: Add a popup Confimation window
                for (let round = 1; round <= 4; round++) {
                    for (let player = 1; player <= 8; player++) {
                        document.getElementById(`score${round}_${player}`).value = "";
                    }
                }
            }

            function clearNames() {
                for (let player = 1; player <= 8; player++) {
                    document.getElementById(`name${player}`).value = "";
                }
            }

        </script>
    </table>
    <button onclick="clearScores()">Clear Scores</button>
    <button onclick="clearNames()">Clear Names</button>
    <button onclick="hideColumn(8)">Hide/Show Purple</button>
</body>
</html>
